"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4384],{4384:(Q,f,s)=>{s.r(f),s.d(f,{SignUpPageModule:()=>O});var p=s(1368),a=s(4716),m=s(2112),g=s(4196),c=s(1528),e=s(4496),v=s(9208),y=s(7284),S=s(5088),h=s(9744),U=s(6507);function I(n,t){1&n&&(e.I0R(0,"div"),e.OEk(1,"This field is required"),e.C$Y())}function P(n,t){1&n&&(e.I0R(0,"div"),e.OEk(1,"name required at least 4 characters"),e.C$Y())}function G(n,t){if(1&n&&(e.I0R(0,"div",9),e.yuY(1,I,2,0,"div",10)(2,P,2,0,"div",10),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.name.errors?null:r.form.controls.name.errors.required),e.yG2(),e.E7m("ngIf",null==r.form.controls.name.errors?null:r.form.controls.name.errors.minlength)}}function R(n,t){1&n&&(e.I0R(0,"div"),e.OEk(1,"Email is required"),e.C$Y())}function E(n,t){1&n&&(e.I0R(0,"div"),e.OEk(1,"Insert valid email"),e.C$Y())}function C(n,t){if(1&n&&(e.I0R(0,"div",9),e.yuY(1,R,2,0,"div",10)(2,E,2,0,"div",10),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),e.yG2(),e.E7m("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function T(n,t){1&n&&(e.I0R(0,"div"),e.OEk(1,"Password is required"),e.C$Y())}function Y(n,t){if(1&n&&(e.I0R(0,"div",9),e.yuY(1,T,2,0,"div",10),e.C$Y()),2&n){const r=e.GaO();e.yG2(),e.E7m("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required)}}const w=[{path:"",component:(()=>{var n;class t{constructor(){this.form=new a.WC({uid:new a.Ku(""),email:new a.Ku("",[a.AQ.required,a.AQ.email]),password:new a.Ku("",[a.AQ.required]),name:new a.Ku("",[a.AQ.required,a.AQ.minLength(4)])}),this.firebaseSvc=(0,e.uUt)(v.C),this.utilsSvc=(0,e.uUt)(y.e)}ngOnInit(){}submit(){var i=this;return(0,c.c)(function*(){if(i.form.value){const o=yield i.utilsSvc.loading();yield o.present(),i.firebaseSvc.signUp(i.form.value).then(function(){var l=(0,c.c)(function*(d){yield i.firebaseSvc.updateUser(i.form.value.name);let u=d.user.uid;i.form.controls.uid.setValue(u),i.setUserInfo(u)});return function(d){return l.apply(this,arguments)}}()).catch(l=>{console.log(l),i.utilsSvc.presentToast({message:l.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{o.dismiss()})}})()}setUserInfo(i){var o=this;return(0,c.c)(function*(){if(o.form.value){const l=yield o.utilsSvc.loading();yield l.present();let d=`users/${i}`;delete o.form.value.password,o.firebaseSvc.setDocument(d,o.form.value).then(function(){var u=(0,c.c)(function*($){o.utilsSvc.saveInLocalStorage("user",o.form.value),o.utilsSvc.routerLink("/main/home"),o.form.reset()});return function($){return u.apply(this,arguments)}}()).catch(u=>{console.log(u),o.utilsSvc.presentToast({message:u.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{l.dismiss()})}})()}}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=e.In1({type:n,selectors:[["app-sign-up"]],decls:14,vars:8,consts:[["backButton","/auth","title","Register"],[1,"d-flex-center"],[1,"auth-form",3,"formGroup","ngSubmit","keypress.enter"],["autocomplete","name","icon","person-outline","type","text","label","name",3,"control"],["class","validators",4,"ngIf"],["autocomplete","email","icon","mail-outline","type","email","label","email",3,"control"],["icon","lock-closed-outline","type","password","label","password",3,"control"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(i,o){1&i&&(e.wR5(0,"app-header",0),e.I0R(1,"ion-content")(2,"div",1)(3,"form",2),e.qCj("ngSubmit",function(){return o.submit()})("keypress.enter",function(){return o.submit()}),e.wR5(4,"app-logo")(5,"app-custom-input",3),e.yuY(6,G,3,2,"div",4),e.wR5(7,"app-custom-input",5),e.yuY(8,C,3,2,"div",4),e.wR5(9,"app-custom-input",6),e.yuY(10,Y,2,1,"div",4),e.I0R(11,"ion-button",7),e.OEk(12," Register "),e.wR5(13,"ion-icon",8),e.C$Y()()()()),2&i&&(e.yG2(3),e.E7m("formGroup",o.form),e.yG2(2),e.E7m("control",o.form.controls.name),e.yG2(),e.E7m("ngIf",o.form.controls.name.errors&&o.form.controls.name.touched),e.yG2(),e.E7m("control",o.form.controls.email),e.yG2(),e.E7m("ngIf",o.form.controls.email.errors&&o.form.controls.email.touched),e.yG2(),e.E7m("control",o.form.controls.password),e.yG2(),e.E7m("ngIf",o.form.controls.password.errors&&o.form.controls.password.touched),e.yG2(),e.E7m("disabled",o.form.invalid))},dependencies:[p.u_,a.sz,a.u,m.sn,m._i,m.Ko,S.k,h.y,U.w,a.uW]}),t})()}];let b=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[g.qQ.forChild(w),g.qQ]}),t})();var M=s(1455);let O=(()=>{var n;class t{}return(n=t).\u0275fac=function(i){return new(i||n)},n.\u0275mod=e.a4G({type:n}),n.\u0275inj=e.s3X({imports:[p.MD,a.y,m.wZ,b,M.k]}),t})()}}]);