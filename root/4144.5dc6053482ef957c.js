"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4144],{4144:(h,f,t)=>{t.r(f),t.d(f,{AuthPageModule:()=>T});var m=t(1368),s=t(4716),d=t(2112),a=t(4196),c=t(1528),o=t(4496),g=t(9208),v=t(7284),y=t(5088),P=t(9744),I=t(6507);function A(n,l){1&n&&(o.I0R(0,"div"),o.OEk(1,"Email is required"),o.C$Y())}function C(n,l){1&n&&(o.I0R(0,"div"),o.OEk(1,"Insert valid email"),o.C$Y())}function E(n,l){if(1&n&&(o.I0R(0,"div",11),o.yuY(1,A,2,0,"div",12)(2,C,2,0,"div",12),o.C$Y()),2&n){const r=o.GaO();o.yG2(),o.E7m("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),o.yG2(),o.E7m("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function R(n,l){1&n&&(o.I0R(0,"div"),o.OEk(1,"Password is required"),o.C$Y())}function M(n,l){if(1&n&&(o.I0R(0,"div",11),o.yuY(1,R,2,0,"div",12),o.C$Y()),2&n){const r=o.GaO();o.yG2(),o.E7m("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required)}}const O=[{path:"",component:(()=>{var n;class l{constructor(){this.form=new s.WC({email:new s.Ku("",[s.AQ.required,s.AQ.email]),password:new s.Ku("",[s.AQ.required])}),this.firebaseSvc=(0,o.uUt)(g.C),this.utilsSvc=(0,o.uUt)(v.e)}ngOnInit(){}submit(){var i=this;return(0,c.c)(function*(){if(i.form.valid){const e=yield i.utilsSvc.loading();yield e.present(),i.firebaseSvc.signIn(i.form.value).then(u=>{console.log(u),i.getUserInfo(u.user.uid)}).catch(u=>{console.log(u),i.utilsSvc.presentToast({message:"Unable to log in. Make sure your email and password are correct",duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{e.dismiss()})}})()}getUserInfo(i){var e=this;return(0,c.c)(function*(){if(e.form.value){const u=yield e.utilsSvc.loading();yield u.present(),e.firebaseSvc.getDocument(`users/${i}`).then(p=>{e.utilsSvc.saveInLocalStorage("user",p),e.utilsSvc.routerLink("/main/home"),e.form.reset(),e.utilsSvc.presentToast({message:`Welcome ${p.name}`,duration:1500,color:"primary",position:"middle",icon:"person-circle-outline"})}).catch(p=>{console.log(p),e.utilsSvc.presentToast({message:p.message,duration:2500,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{u.dismiss()})}})()}}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275cmp=o.In1({type:n,selectors:[["app-auth"]],decls:17,vars:6,consts:[["title","Login"],[1,"d-flex-center"],[1,"auth-form",3,"formGroup","ngSubmit","keypress.enter"],["autocomplete","email","icon","mail-outline","type","email","label","email",3,"control"],["class","validators",4,"ngIf"],["icon","lock-closed-outline","type","password","label","password",3,"control"],["routerLink","forgot-password",1,"ion-end-text"],["expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","log-in-outline"],["routerLink","sign-up","expand","block","mode","ios","fill","outline",1,"ion-margin-top"],["slot","end","name","person-add-outline"],[1,"validators"],[4,"ngIf"]],template:function(i,e){1&i&&(o.wR5(0,"app-header",0),o.I0R(1,"ion-content")(2,"div",1)(3,"form",2),o.qCj("ngSubmit",function(){return e.submit()})("keypress.enter",function(){return e.submit()}),o.wR5(4,"app-logo")(5,"app-custom-input",3),o.yuY(6,E,3,2,"div",4),o.wR5(7,"app-custom-input",5),o.yuY(8,M,2,1,"div",4),o.I0R(9,"p",6),o.OEk(10,"Forgot Password"),o.C$Y(),o.I0R(11,"ion-button",7),o.OEk(12," Insert "),o.wR5(13,"ion-icon",8),o.C$Y(),o.I0R(14,"ion-button",9),o.OEk(15," Register "),o.wR5(16,"ion-icon",10),o.C$Y()()()()),2&i&&(o.yG2(3),o.E7m("formGroup",e.form),o.yG2(2),o.E7m("control",e.form.controls.email),o.yG2(),o.E7m("ngIf",e.form.controls.email.errors&&e.form.controls.email.touched),o.yG2(),o.E7m("control",e.form.controls.password),o.yG2(),o.E7m("ngIf",e.form.controls.password.errors&&e.form.controls.password.touched),o.yG2(3),o.E7m("disabled",e.form.invalid))},dependencies:[m.u_,s.sz,s.u,d.sn,d._i,d.Ko,d.mY,a.ER,y.k,P.y,I.w,s.uW]}),l})()},{path:"sign-up",loadChildren:()=>t.e(4384).then(t.bind(t,4384)).then(n=>n.SignUpPageModule)},{path:"forgot-password",loadChildren:()=>t.e(1384).then(t.bind(t,1384)).then(n=>n.ForgotPasswordPageModule)}];let G=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.a4G({type:n}),n.\u0275inj=o.s3X({imports:[a.qQ.forChild(O),a.qQ]}),l})();var S=t(1455);let T=(()=>{var n;class l{}return(n=l).\u0275fac=function(i){return new(i||n)},n.\u0275mod=o.a4G({type:n}),n.\u0275inj=o.s3X({imports:[m.MD,s.y,d.wZ,G,S.k]}),l})()},6507:(h,f,t)=>{t.d(f,{w:()=>d});var m=t(4496),s=t(2112);let d=(()=>{var a;class c{constructor(){}ngOnInit(){}}return(a=c).\u0275fac=function(g){return new(g||a)},a.\u0275cmp=m.In1({type:a,selectors:[["app-logo"]],decls:5,vars:0,consts:[["color","primary","name","shield-outline",1,"shield-icon"],["color","primary"]],template:function(g,v){1&g&&(m.wR5(0,"ion-icon",0),m.I0R(1,"ion-text",1)(2,"h1")(3,"strong"),m.OEk(4,"Admin"),m.C$Y()()())},dependencies:[s.Ko,s.Wg],styles:[".shield-icon[_ngcontent-%COMP%]{font-size:80px;margin-top:40px}h1[_ngcontent-%COMP%]{margin-top:0}"]}),c})()}}]);